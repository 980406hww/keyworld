<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.keymanager.monitoring.dao.KeywordDao">

	<select id="findKeywords" resultType="java.util.Map">
		SELECT
			k.id AS 'id',
			k.user_id as 'user_id',
			k.status as 'status',
			k.keyword as 'keyword',
			k.update_time as 'update_time',
			k.create_time as 'create_time',
			u.username as 'username'
		FROM
			t_keyword k
		JOIN t_user u ON k.user_id = u.id
		<where>
			<if test="userId != null and userId != ''"> and k.user_id = #{userId} </if>
		</where>
		order by u.username, k.create_time desc
	</select>

	<select id="existKeyword" resultType="com.keymanager.monitoring.entity.Keyword">
		select * from t_keyword where fKeyword = #{keyword} and fSearchEngine = #{searchEngine} limit  1
	</select>
</mapper>