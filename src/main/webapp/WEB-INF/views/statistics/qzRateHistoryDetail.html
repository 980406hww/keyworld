<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>关键字管理系统</title>

    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/static/ok-admin/css/home.css" media="all"/>
    <script type="text/javascript" src="/static/ok-admin/lib/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="/static/ok-admin/lib/echarts/echarts.theme.js"></script>
    <style>

        input.layui-input.layui-unselect {
            height: 30px !important;
        }

        .layui-unselect.layui-form-select {
            margin-right: 10px;
        }

        .layui-form-radio {
            line-height: 28px;
            margin: 2px 10px 0 0;
            padding-right: 10px;
            cursor: pointer;
            font-size: 0;
        }
        .map-body {
            height: 300px;
        }

    </style>
</head>
<body class="childrenBody home">
<div class="layui-row layui-col-space15">

    <div class="layui-col-md12">
        <div class="layui-card">
            <div class="yskj-card-body map-body">
                <div class="layui-col-md12 layui-form" style="z-index: 999">
<!--                    <div class="layui-col-md3"><h4 class="my-card-title">站点涨幅历史</h4></div>-->

                </div>

                <div style="height: 100%;" id="qzRateHistory"></div>
            </div>
        </div>
    </div>

</div>


</body>
</html>
<script type="text/javascript" src="/static/ok-admin/lib/layui/layui.js"></script>
<script>
    var qzUuid_ = '<#if qzUuid?exists>${qzUuid}</#if>';
    var terminalType_ = '<#if qzRateTerminalType?exists>${qzRateTerminalType}</#if>';
    layui.use(['jquery', 'form', 'common','table'], function () {
        let $ = layui.jquery;
        let form = layui.form;
        let common = layui.common;
        let table = layui.table;


        let postData= {};
        postData.qzUuid = qzUuid_;
        postData.terminalType = terminalType_;

        init_qz_rate_hsitory(postData);



        function init_qz_rate_hsitory(condition) {
            $.ajax({
                url: '/internal/qzRateStatistics/getQZRateHistory',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                data: JSON.stringify(condition),
                timeout: 10000,
                type: 'POST',
                success: function (res) {
                    if (res.code === 200) {
                        let rate = [];
                        let date = [];
                        if (res.data !== null && res.data.totalDate !== null) {
                            rate = res.data.totalRate.split(',');
                            date = res.data.totalRateDate.split(',');
                            let qzRateHistoryOption = {
                                noDataLoadingOption: {
                                    text: '暂无数据',
                                    effect: 'bubble',
                                    effectOption:
                                        {
                                            effect:
                                                {
                                                    n: 0
                                                }
                                        }
                                },
                                "tooltip": {
                                    "trigger": "axis",
                                    "axisPointer": {
                                        "type": "cross",
                                        "label": {
                                            "backgroundColor": "#6a7985"
                                        }
                                    }
                                },
                                "legend": {
                                    "orient": 'vertical',
                                    "data": [
                                        "涨幅"

                                    ]
                                },
                                "grid": {
                                    "top": "12%",
                                    "left": "3%",
                                    "right": "3%",
                                    "bottom": "5%",
                                    "containLabel": true
                                },
                                "xAxis": [
                                    {
                                        "type": "category",
                                        "boundaryGap": false,
                                        "data": date
                                    }
                                ],
                                "yAxis": [
                                    {
                                        "type": "value"
                                    }
                                ],
                                "series": [
                                    {
                                        "name": "涨幅",
                                        "type": "line",
                                        "areaStyle": {normal: {color: 'rgba(255,255,255,0)'}},
                                        "data": rate

                                    }

                                ]
                            };
                            let qzRateHistory = echarts.init($('#qzRateHistory')[0]);
                            qzRateHistory.setOption(qzRateHistoryOption);
                        }else {
                            $('#qzRateHistory').css('text-align','center').append('<h3 class="my-card-title">暂无数据</h3>')
                        }

                    }
                },
                error: function () {
                    layer.msg('操作失败', {icon: 5});
                }
            });
        }

    });
</script>





















