<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>关键字管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/static/style/images/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="/static/ok-admin/css/okadmin-v2.css"/>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin okadmin">
    <!--头部导航-->
    <!--    <div class="layui-header okadmin-header">-->
    <!--        <ul class="layui-nav layui-layout-left">-->
    <!--            <li class="layui-nav-item">-->
<!--                    <a class="ok-menu ok-show-menu" href="javascript:;" title="菜单切换">-->
<!--                        <i class="layui-icon layui-icon-shrink-right" id="ok_app_menu"></i>-->
<!--                    </a>-->
    <!--            </li>-->
    <!--            <li class="layui-nav-item">-->
    <!--                <a class="ok-refresh" href="javascript:;" title="刷新">-->
    <!--                    <i class="layui-icon layui-icon-refresh-3"></i>-->
    <!--                </a>-->
    <!--            </li>-->
    <!--            <li class="layui-nav-item ok-input-search">-->
    <!--                <input type="text" placeholder="搜索..." class="layui-input layui-input-search"/>-->
    <!--            </li>-->
    <!--            <li class="ok-nav-item ok-hide-md">-->

    <!--                &lt;!&ndash;<div id="tp-weather-widget"></div>&ndash;&gt;-->
    <!--            </li>-->
    <!--        </ul>-->
    <!--        <ul class="layui-nav layui-layout-right">-->
    <!--            <li class="no-line layui-nav-item">-->
    <!--                <a href="javascript:;">-->
    <!--                    <@shiro.principal property="name"/>-->
    <!--                </a>-->
    <!--                <dl id="userInfo" class="layui-nav-child">-->
    <!--&lt;!&ndash;                    <dd><a lay-id="u-1" href="javascript:;">个人中心<span&ndash;&gt;-->
    <!--&lt;!&ndash;                            class="layui-badge-dot"></span></a></dd>&ndash;&gt;-->
    <!--                    <dd><a href="javascript:void(0)" id="logout">退出登录</a></dd>-->
    <!--                </dl>-->
    <!--            </li>-->
    <!--        </ul>-->
    <!--    </div>-->
    <!--遮罩层-->
    <div class="ok-make"></div>
    <!--左侧导航区域-->
    <div class="layui-side layui-side-menu okadmin-bg-20222A ok-left">
        <div class="layui-side-scroll okadmin-side">
            <div class="okadmin-logo">关键字管理系统</div>
            <!--<div class="user-photo">
                <a class="img" title="我的头像">
                    <img src="${ctx.basePath}/static/ok-admin/images/head.png" class="userAvatar">
                </a>
                <p>你好！<span class="userName">  <@shiro.principal property="name"/></span>, 欢迎登录</p>
            </div>-->
            <!--左侧导航菜单-->
            <ul id="navBar" class="layui-nav okadmin-nav okadmin-bg-20222A layui-nav-tree">
            </ul>
        </div>
    </div>

    <!-- 内容主体区域 -->
    <div class="content-body">
        <div class="layui-tab ok-tab" id="mainnav" lay-filter="ok-tab" lay-allowClose="true" lay-unauto>
            <div class="layui-icon okadmin-tabs-control ok-right-nav-menu">
                <a class="ok-menu ok-show-menu" href="javascript:;" style="width: 40px;height: 40px;display: inline-block" title="菜单切换">
                    <i class="layui-icon layui-icon-shrink-right" id="ok_app_menu"></i>
                </a>
            </div>
            <div data-id="left" id="okLeftMove" class="layui-icon okadmin-tabs-control layui-icon-prev okNavMove" style="left: 40px;"></div>
<!--            <div class="layui-icon okadmin-tabs-control ok-right-nav-menu" style="right: 120px;">-->
<!--                <a href="javascript:void(0)" id="logout" title="退出">-->
<!--                    <i class="exit-icon"></i>-->
<!--                </a>-->
<!--            </div>-->
            <div data-id="right" id="okRightMove" class="layui-icon okadmin-tabs-control layui-icon-next okNavMove" style="right: 180px;"></div>
            <div class="layui-icon okadmin-tabs-control ok-right-nav-menu" style="right: 140px;">
                <ul class="okadmin-nav">
                    <li class="no-line okadmin-nav-item">
                        <div class="okadmin-link layui-icon-down" href="javascript:;"></div>
                        <dl id="tabAction" class="okadmin-nav-child layui-anim-upbit layui-anim">
                            <dd><a data-num="1" href="javascript:;">关闭当前标签页</a></dd>
                            <dd><a data-num="2" href="javascript:;">关闭其他标签页</a></dd>
                            <dd><a data-num="3" href="javascript:;">关闭所有标签页</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="layui-icon okadmin-tabs-control ok-right-nav-menu" style="right: 100px;">
                <a id="ok-refresh" class="ok-refresh" href="javascript:;" style="width: 40px;line-height: 40px;display: inline-block" title="刷新">
                    <i class="layui-icon layui-icon-refresh-3"></i>
                </a>
            </div>
            <div class="layui-icon okadmin-tabs-control ok-right-nav-menu" style="right: 0;width: 100px;">
                <ul class="okadmin-nav">
                    <li class="no-line okadmin-nav-item">
                        <div class="okadmin-link ">
                            <@shiro.principal property="name"/>
                        </div>
                        <dl class="okadmin-nav-child layui-anim-upbit layui-anim" style="right: -10px">
                            <dd><a id="logout" href="javascript:;" style="width: 100px">退出登录</a></dd>
                            <@shiro.hasPermission name="/internal/config/evictAllConfigCache">
                            <dd><a onclick="clearConfigCache()" href="javascript:;" style="width: 100px">清理Config</a></dd>
                            </@shiro.hasPermission>
                            <@shiro.hasPermission name="/internal/negativelist/evictAllNegativeListCache">
                            <dd><a onclick="clearNegativeListCache()" href="javascript:;" href="/internal/negativelists/evictAllNegativeListCache" style="width: 100px">清理负面清单</a></dd>
                            </@shiro.hasPermission>
                        </dl>
                    </li>
                </ul>
            </div>
            <ul class="layui-tab-title ok-tab-title not-scroll">
                <li class="layui-this" lay-id="1-1" >
                    <strong style="display: none;" is-close="true" lay-id="keywordCount" data-url="/internal/customerKeyword/toKeywords"></strong>
                    <i class="ok-icon ok-iconairplay"></i>
                    <cite>关键字统计</cite>
                </li>
            </ul>
            <div class="layui-tab-content ok-tab-content">
                <div class="layui-tab-item layui-show">
                    <iframe src='/internal/customerKeyword/toKeywords' frameborder="0" scrolling="yes" width="100%" height="90%"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>

<!--js逻辑-->
<script src="/static/ok-admin/lib/layui/layui.js"></script>
<script src="/static/ok-admin/js/okadmin.js"></script>
<script>
    layui.use(['jquery', 'common'], function () {
        let $ = layui.jquery;
        let common = layui.common;
        window.clearConfigCache = function () {
            $.ajax({
                url: '/internal/configs/evictAllConfigCache',
                type: 'GET',
                dataType: 'json',
                success: function (res) {
                    if (res.code === 200) {
                        common.showSuccessMsg("清理成功", function () {
                        });
                    } else {
                        common.showFailMsg("清理失败");
                    }
                },
                error: function () {
                    common.showFailMsg("网络错误请稍后再试");
                }
            });
        };

        window.clearNegativeListCache = function () {
            $.ajax({
                url: '/internal/negativelists/evictAllNegativeListCache',
                type: 'GET',
                dataType: 'json',
                success: function (res) {
                    if (res.code === 200) {
                        common.showSuccessMsg("清理成功", function () {
                        });
                    } else {
                        common.showFailMsg("清理失败");
                    }
                },
                error: function () {
                    common.showFailMsg("网络错误请稍后再试");
                }
            });
        };
    });
</script>
</body>
</html>
