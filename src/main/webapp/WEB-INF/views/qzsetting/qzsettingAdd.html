<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>添加</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="/static/ok-admin/lib/layui/css/layui.css">
  <link rel="stylesheet" href="/static/ok-admin/css/sub-page.css">
  <style>
    .padding-ten-left {
      padding-left: 2px;
    }

    .padding-ten-right {
      padding-right: 2px;
    }

    .layui-btn {
      width: 150px;
    }

    .qzsetting-box {
      padding: 10px 10px 5px 10px;
      border-radius: 2px 0 0 2px;
      border: solid 1px #e6e6e6;
    }
  </style>
</head>
<div>
  <!--form表单-->
  <form class="layui-form layui-form-pane ok-form" lay-filter="addCustomer">
    <div class="ok-body">
      <input type="hidden" name="qzSettingUuid"/>
      <div class="layui-row">
        <div class="layui-col-md6 padding-ten-right">
          <div class="layui-form-item">
            <label class="layui-form-label">客户</label>
            <div class="layui-input-block">
              <select name="qzSettingCustomer" lay-verify="required" lay-search>
                <option value="">请选择</option>
                <option value="0">老杜</option>
                <option value="1">是我</option>
              </select>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">域名</label>
            <div class="layui-input-block">
              <input type="text" name="qzSettingDomain" placeholder="请输入域名" autocomplete="off"
                     class="layui-input" lay-verify="required">
            </div>
          </div>
        </div>
        <div class="layui-col-md6 padding-ten-left">
          <div class="layui-form-item">
            <label class="layui-form-label">标签</label>
            <div class="layui-input-block">
              <input type="text" name="qzCategoryTagNames" placeholder="按正确方式输入：阿卡索,MBA,算法"
                     autocomplete="off"
                     class="layui-input" lay-verify="required">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">熊掌号</label>
            <div class="layui-input-block">
              <input type="text" name="bearPawNumber" placeholder="请输入熊掌号" autocomplete="off"
                     class="layui-input" lay-verify="required">
            </div>
          </div>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">搜索引擎</label>
        <div class="layui-input-block">
          <select name="searchEngine">
            <option value="1">百度</option>
            <option value="2">谷歌</option>
          </select>
        </div>
      </div>
      <fieldset class="layui-elem-field layui-field-title">
        <legend>收费规则</legend>
      </fieldset>
      <div class="layui-row">
        <div class="layui-col-md6 padding-ten-right">
          <div class="layui-form-item" pane>
            <label class="layui-form-label">电脑</label>
            <div class="layui-input-block">
              <input type="checkbox" checked name="computer" lay-skin="switch" lay-filter="computer"
                     lay-text="Select|Deselect">
            </div>
          </div>
          <div id="comQzsettingBoxSelect" class="layui-form-item" pane>
            <label class="layui-form-label">达标优化类型</label>
            <div class="layui-input-block">
              <input type="radio" name="optimizationComType" lay-filter="optimizationComType"
                     value="1" title="主优化" checked>
              <input type="radio" name="optimizationComType" lay-filter="optimizationComType"
                     value="2" title="次优化">
              <input type="radio" name="optimizationComType" lay-filter="optimizationComType"
                     value="0" title="辅助优化">
            </div>
          </div>
          <div id="comQzsettingBox" class="qzsetting-box">
            <div class="layui-form-item">
              <label class="layui-form-label">分组</label>
              <div class="layui-input-block">
                <input type="text" name="comGroup" placeholder="请输入分组" autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">电脑域名</label>
              <div class="layui-input-block">
                <input type="text" name="comSubDomainName" placeholder="请输入电脑域名" autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">当前词量</label>
              <div class="layui-input-block">
                <input type="text" name="comCurrentKeywordCount" placeholder="请输入当前词量"
                       autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">限制词量</label>
              <div class="layui-input-block">
                <input type="text" name="comMaxKeywordCount" placeholder="请输入限制词量"
                       autocomplete="off"
                       class="layui-input" value="300" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item layui-form-text">
              <label class="layui-form-label">达标备注</label>
              <div class="layui-input-block">
              <textarea name="comMonitorRemark" placeholder="请填写电脑端达标备注, 如：首月30-50个词 客供词 3000"
                        class="layui-textarea"></textarea>
              </div>
            </div>
            <div id="comStandardSpecies" class="layui-form-item" pane>
              <label class="layui-form-label">达标种类</label>
              <div class="layui-input-block">
                <input type="radio" name="comStandardSpecies" value="aiZhan" title="爱站" checked>
                <input type="radio" name="comStandardSpecies" value="5118" title="5118">
                <input type="radio" name="comStandardSpecies" value="designationWord" title="指定词">
                <input type="radio" name="comStandardSpecies" value="other" title="其他">
              </div>
            </div>
          </div>
        </div>
        <div class="layui-col-md6 padding-ten-left">
          <div class="layui-form-item" pane>
            <label class="layui-form-label">手机</label>
            <div class="layui-input-block">
              <input type="checkbox" checked name="phone" lay-skin="switch" lay-filter="phone"
                     lay-text="Select|Deselect">
            </div>
          </div>
          <div id="phoneQzsettingBoxSelect" class="layui-form-item" pane>
            <label class="layui-form-label">达标优化类型</label>
            <div class="layui-input-block">
              <input type="radio" name="optimizationPhoneType" lay-filter="optimizationPhoneType"
                     value="1" title="主优化" checked>
              <input type="radio" name="optimizationPhoneType" lay-filter="optimizationPhoneType"
                     value="2" title="次优化">
              <input type="radio" name="optimizationPhoneType" lay-filter="optimizationPhoneType"
                     value="0" title="辅助优化">
            </div>
          </div>
          <div id="phoneQzsettingBox" class="qzsetting-box">
            <div class="layui-form-item">
              <label class="layui-form-label">分组</label>
              <div class="layui-input-block">
                <input type="text" name="phoneGroup" placeholder="请输入分组" autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">电脑域名</label>
              <div class="layui-input-block">
                <input type="text" name="phoneSubDomainName" placeholder="请输入电脑域名"
                       autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">当前词量</label>
              <div class="layui-input-block">
                <input type="text" name="phoneCurrentKeywordCount" placeholder="请输入当前词量"
                       autocomplete="off"
                       class="layui-input" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">限制词量</label>
              <div class="layui-input-block">
                <input type="text" name="phoneMaxKeywordCount" placeholder="请输入限制词量"
                       autocomplete="off"
                       class="layui-input" value="300" lay-verify="required">
              </div>
            </div>
            <div class="layui-form-item layui-form-text">
              <label class="layui-form-label">达标备注</label>
              <div class="layui-input-block">
              <textarea name="phoneMonitorRemark" placeholder="请填写电脑端达标备注, 如：首月30-50个词 客供词 3000"
                        class="layui-textarea"></textarea>
              </div>
            </div>
            <div id="phoneStandardSpecies" class="layui-form-item" pane>
              <label class="layui-form-label">达标种类</label>
              <div class="layui-input-block">
                <input type="radio" name="phoneStandardSpecies" value="aiZhan" title="爱站" checked>
                <input type="radio" name="phoneStandardSpecies" value="5118" title="5118">
                <input type="radio" name="phoneStandardSpecies" value="designationWord" title="指定词">
                <input type="radio" name="phoneStandardSpecies" value="other" title="其他">
              </div>
            </div>
          </div>
        </div>
      </div>
      <fieldset class="layui-elem-field layui-field-title">
        <legend>爬取规则</legend>
      </fieldset>
      <div class="layui-row" style="margin-bottom: 48px">
        <div class="layui-col-md6 padding-ten-right">
          <div class="layui-form-item">
            <label class="layui-form-label">去掉没指数</label>
            <div class="layui-input-block">
              <select name="qzSettingIgnoreNoIndex">
                <option value="1">是</option>
                <option value="0">否</option>
              </select>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">爬取关键字</label>
            <div class="layui-input-block">
              <select name="qzSettingAutoCrawlKeywordFlag">
                <option value="1">是</option>
                <option value="0">否</option>
              </select>
            </div>
          </div>
        </div>
        <div class="layui-col-md6 padding-ten-left">
          <div class="layui-form-item">
            <label class="layui-form-label">去掉没排名</label>
            <div class="layui-input-block">
              <select name="qzSettingIgnoreNoOrder">
                <option value="1">是</option>
                <option value="0">否</option>
              </select>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">更新间隔</label>
            <div class="layui-input-block">
              <select name="qzSettingInterval">
                <option value="1">1天</option>
                <option value="2">2天</option>
                <option value="3">3天</option>
                <option value="5">5天</option>
                <option value="7">7天</option>
                <option value="10">10天</option>
                <option value="12">12天</option>
                <option value="15" selected>15天</option>
              </select>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div style="position: fixed;bottom: 0;width: 100%;background:#fff;text-align: right;">
      <div style="margin: 0 10px 6px 10px; padding-top: 8px;border-top: solid 1px #e6e6e6">
        <button class="layui-btn" lay-submit lay-filter="commitCustomer">确定</button>
        <button type="reset" class="layui-btn layui-btn-primary" style="margin-right: 20px">
          重置
        </button>
      </div>
    </div>
  </form>
</div>
<!--js逻辑-->

<script src="/static/ok-admin/lib/layui/layui.js"></script>
<script>

  let uuid_ = null;
  let layui_ = null;

  function initForm(data) {
    uuid_ = data;
    if (layui_ != null) {
      setForm(layui_, uuid_);
    }
  }

  function setForm(l, u) {
    l.jquery.ajax({
      url: '/internal/customer/getCustomersMsgById/' + u,
      type: 'get',
      dataType: 'json',
      success: function (res) {
        if (res.code === 200) {
          if (res.data.dailyReportIdentify) {
            res.data.dailyReportIdentify = 1
          } else {
            res.data.dailyReportIdentify = 0
          }
          layui.form.val("addCustomer", res.data);
        } else {
          l.layer.msg(res.msg);
        }
      }
    });
  }

  layui.use(["form", "okLayer", "jquery", "layer"], function () {
    let form = layui.form;
    let okLayer = layui.okLayer;
    let $ = layui.jquery;
    let layer = layui.layer;

    if (uuid_ != null) {
      setForm(layui, uuid_);
    } else {
      layui_ = layui;
    }

    let comQzsettingBoxSelect = document.getElementById('comQzsettingBoxSelect');
    let comQzsettingBox = document.getElementById('comQzsettingBox');
    //监听指定开关
    form.on('switch(computer)', function (data) {
      if (this.checked) {
        comQzsettingBoxSelect.style.display = 'block';
        comQzsettingBox.style.display = 'block';
      } else {
        comQzsettingBoxSelect.style.display = 'none';
        comQzsettingBox.style.display = 'none';
      }
      // layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
    });

    let phoneQzsettingBoxSelect = document.getElementById('phoneQzsettingBoxSelect');
    let phoneQzsettingBox = document.getElementById('phoneQzsettingBox');
    //监听指定开关
    form.on('switch(phone)', function (data) {
      if (this.checked) {
        phoneQzsettingBoxSelect.style.display = 'block';
        phoneQzsettingBox.style.display = 'block';
      } else {
        phoneQzsettingBoxSelect.style.display = 'none';
        phoneQzsettingBox.style.display = 'none';
      }
    });

    let comStandardSpecies = document.getElementById('comStandardSpecies');
    //监听指定radio
    form.on('radio(optimizationComType)', function (data) {
      switch (data.value) {
        case '1':
          comStandardSpecies.style.display = 'block';
          break;
        case '2':
          comStandardSpecies.style.display = 'block';
          break;
        case '0':
          comStandardSpecies.style.display = 'none';
          break;
        default:
          comStandardSpecies.style.display = 'none';
      }
    });

    let phoneStandardSpecies = document.getElementById('phoneStandardSpecies');
    //监听指定radio
    form.on('radio(optimizationPhoneType)', function (data) {
      switch (data.value) {
        case '1':
          phoneStandardSpecies.style.display = 'block';
          break;
        case '2':
          phoneStandardSpecies.style.display = 'block';
          break;
        case '0':
          phoneStandardSpecies.style.display = 'none';
          break;
        default:
          phoneStandardSpecies.style.display = 'none';
      }
    });

    form.on("submit(commitCustomer)", function (data) {

      console.log(data);

      // $.ajax({
      //   url: '/internal/customer/postCustomersAdd',
      //   type: 'post',
      //   // 用于设置响应体的类型 注意 跟 data 参数没关系！！！
      //   data: data.field,
      //   dataType: 'json',
      //   success: function (res) {
      //     // 一旦设置的 dataType 选项，就不再关心 服务端 响应的 Content-Type 了
      //     // 客户端会主观认为服务端返回的就是 JSON 格式的字符串
      //     if (res.code === 200) {
      //       okLayer.msg.greenTick("保存成功", function () {
      //         parent.window.sign = true;
      //         // parent.window.myTable.reload();
      //         parent.layer.close(parent.layer.getFrameIndex(window.name));
      //       });
      //     } else {
      //       layui.layer.msg(res.msg);
      //     }
      //   }
      // });
      return false;
    });

    form.verify({
      qq: [
        /(^$)|(^[1-9]\d{4,14}$)/,
        "请输入正确格式QQ"
      ],
      telPhone: [
        /(^$)|(^(13[0-9]|14[5-9]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[13589])\d{8}$)/,
        "请输入正确格式手机号码"
      ]
    });
  })

</script>
</body>
</html>
